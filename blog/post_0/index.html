<!-- auto-generated document -->
<html lang = "en">
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

		<!-- Bootstrap CSS -->
		<!-- <link href="https://bootswatch.com/4/solar/bootstrap.min.css" rel="stylesheet"> -->
		<link href="https://bootswatch.com/4/slate/bootstrap.min.css" rel="stylesheet">
		

		<!-- Latest compiled and minified JavaScript -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

		<!-- set title on top of the tab -->
		<title>C++ to Python: Bindings with Swig</title>
	</head>
	<body>
		<center class="jumbotron">
			<h2> 
				C++ to Python: Bindings with Swig
			</h2>
		</center>
		<div class="container">
			<p>
				This is a quick walk through of how to take c++ and run it with Python through bindings. If you find yourself wishing to learn more on the topic, 
				<a href="http://www.swig.org/Doc1.3/Python.html" target="_blank">Swig's website</a>
				 for working with Python is a good start. My experience in setting this up was far more tedious than it had to be and I hope this will save people some time. As a note, I currently work on Ubuntu 16.04 and Python 2.7, this will be tailored to those dependencies, however, I do not believe any major changes will be required to the setup.py file based on
				 <a href="http://www.swig.org/Doc1.3/Python.html" target="_blank">Swig's website</a>
				  and a 
				  <a href="https://stackoverflow.com/questions/32667888/building-extension-for-python-3-with-swig-and-distutils" target="_blank">Stackoverflow question for Python 3.</a>
				  In addition, the majority of operating systems should be covered by this walkthrough, with minor tweaks such as yum instead of apt-get for select operating systems.
			</p>
		</div>
		<div class="container">
			<h3 class="card mb-3">
				<div class="container" id="install">
					1. Installing
				</div>
			</h3>

			<h4>
				python-dev
			</h4>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #f8f8f2">sudo</span> <span style="color: #f8f8f2">apt</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">get</span> <span style="color: #f8f8f2">install</span> <span style="color: #f8f8f2">python</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">dev</span>   <span style="color: #75715e"># python2.x</span>
<span style="color: #f8f8f2">sudo</span> <span style="color: #f8f8f2">apt</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">get</span> <span style="color: #f8f8f2">install</span> <span style="color: #f8f8f2">python3</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">dev</span>  <span style="color: #75715e"># python3.x</span>
</pre></div>

			<br>

			<h4>
				swig
			</h4>
			<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #f8f8f2">sudo</span> <span style="color: #f8f8f2">apt</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">get</span> <span style="color: #f8f8f2">install</span> <span style="color: #f8f8f2">swig</span>
</pre></div>

			<br>

			This was all I needed to install to get things running, however, if you run into issues let me know so I can update the requirements.
			<br><br>
		</div>
		<div class="container">
			<h3 class="card mb-3">
				<div class="container" id="source">
					2. Source
				</div>
			</h3>

			Naive c++ fibonacci implementation, filename: <code>fib.cpp</code>
			<br><br>

			<!-- Generated by http://hilite.me/ -->
<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #75715e">#include &quot;fib.h&quot;</span>

<span style="color: #66d9ef">int</span> <span style="color: #a6e22e">fibonacci</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">n)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #66d9ef">if</span><span style="color: #f8f8f2">(n</span> <span style="color: #f92672">&lt;=</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">)</span> <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">n;</span>
    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">fibonacci(n</span><span style="color: #f92672">-</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">)</span> <span style="color: #f92672">+</span> <span style="color: #f8f8f2">fibonacci(n</span><span style="color: #f92672">-</span><span style="color: #ae81ff">2</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
		
		<br><br>
		c++ fibonacci header file, filename: <code>fib.h</code>. I'm going to explain why this file exists in a moment.
		<br><br>

		<!-- Generated by http://hilite.me/ -->
		<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">int</span> <span style="color: #a6e22e">fibonacci</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">n);</span>
</pre></div>
		
		<br><br>

		The next file is the interface file for swig, <code>fib.i</code>. This is telling swig what bindings it will need to create and is why we implemented <code>fib.h</code>.

		<br><br>
		<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #f92672">%</span><span style="color: #f8f8f2">module</span> <span style="color: #f8f8f2">Fibonacci</span>
<span style="color: #f92672">%</span><span style="color: #f8f8f2">{</span>
<span style="color: #75715e">#include &quot;fib.h&quot;</span>
<span style="color: #f92672">%</span><span style="color: #f8f8f2">}</span>
<span style="color: #f92672">%</span><span style="color: #f8f8f2">include</span> <span style="color: #e6db74">&quot;fib.h&quot;</span>
</pre></div>
		
	</div>
	<br><br>
	<div class="container">
		<h3 class="card mb-3">
			<div class="container" id="building">
				3. Building
			</div>
		</h3>

		<code>setup.py</code>, this file is taken directly from 
		<a href="http://www.swig.org/Doc1.3/Python.html#Python_nn6" target="_blank">Swig's documentation</a>
		and modified slightly.
		<br><br>

		<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #75715e">#!/usr/bin/env python</span>

<span style="color: #f92672">from</span> <span style="color: #f8f8f2">distutils.core</span> <span style="color: #f92672">import</span> <span style="color: #f8f8f2">setup,</span> <span style="color: #f8f8f2">Extension</span>

<span style="color: #f8f8f2">fib_module</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">Extension(</span>
   <span style="color: #e6db74">&#39;_Fibonacci&#39;</span><span style="color: #f8f8f2">,</span>
   <span style="color: #f8f8f2">sources</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">[</span><span style="color: #e6db74">&#39;fib_wrap.cxx&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;fib.cpp&#39;</span><span style="color: #f8f8f2">],</span> <span style="color: #75715e"># fib_wrap.cxx is going to be generated by swig</span>
<span style="color: #f8f8f2">)</span>

<span style="color: #f8f8f2">setup</span> <span style="color: #f8f8f2">(</span>
    <span style="color: #f8f8f2">name</span>        <span style="color: #f92672">=</span> <span style="color: #e6db74">&#39;Fibonacci&#39;</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">version</span>     <span style="color: #f92672">=</span> <span style="color: #e6db74">&#39;0.0&#39;</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">author</span>      <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;YOUR_NAME&quot;</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">description</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;Fibonacci swig&quot;</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">ext_modules</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">[fib_module],</span>
    <span style="color: #f8f8f2">py_modules</span>  <span style="color: #f92672">=</span> <span style="color: #f8f8f2">[</span><span style="color: #e6db74">&quot;Fibonacci&quot;</span><span style="color: #f8f8f2">],</span> <span style="color: #75715e"># name of module that we&#39;re going import</span>
<span style="color: #f8f8f2">)</span>
</pre></div>
	<br><br>
	<code>build.sh</code> or whatever you fancy.
	<br><br>

<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #75715e">#!/bin/bash</span>

<span style="color: #f8f8f2">swig</span> <span style="color: #f92672">-</span><span style="color: #f8f8f2">c</span><span style="color: #f92672">++</span> <span style="color: #f92672">-</span><span style="color: #f8f8f2">python</span> <span style="color: #f8f8f2">fib</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">i</span> 
<span style="color: #f8f8f2">python</span> <span style="color: #f8f8f2">setup</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">py</span> <span style="color: #f8f8f2">build_ext</span> <span style="color: #f92672">--</span><span style="color: #f8f8f2">inplace</span>
</pre></div>

	<br><br>
	</div>

	<div class="container">
		<h3 class="card mb-3">
			<div class="container" id="running">
				4. Running
			</div>
		</h3>

		Assign permissions (e.g. <code>chmod 755 build.sh</code>) and run <code>./build.sh</code>. From there you can go into the python console and test by running the following:
		<br><br>

		<!-- HTML generated using hilite.me --><div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #f92672">&gt;&gt;&gt;</span> <span style="color: #f92672">import</span> <span style="color: #f8f8f2">Fibonacci</span>
<span style="color: #f92672">&gt;&gt;&gt;</span> <span style="color: #f8f8f2">Fibonacci</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">fibonacci(</span><span style="color: #ae81ff">10</span><span style="color: #f8f8f2">)</span>
<span style="color: #ae81ff">55</span>
</pre></div>
	<br><br>
	</div>
		<div class="container">
			<h3 class="card mb-3">
				<div class="container" id="conclusion">
					5. Conclusion
				</div>
			</h3>

			Please let me know if anything here can be improved so I can update this for future readers. Regardless, I hope this helped some of you with your projects/work and saved you some time.
			<br>
			<br>
		</div>
		<br>
		<br>
		<br>
<!-- Disqus for comments -->
<div id="disqus_thread" class="container"></div>
<script>
/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
	var d = document, s = d.createElement('script');
	s.src = 'https://bi3mer-github-io.disqus.com/embed.js';
	s.setAttribute('data-timestamp', +new Date());
	(d.head || d.body).appendChild(s);
})();
</script>
<noscript>
	Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
<script id="dsq-count-scr" src="//bi3mer-github-io.disqus.com/count.js" async></script><!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GA_TRACKING_ID"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VEPF12WK7P"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VEPF12WK7P');
</script>	</body>
</html>